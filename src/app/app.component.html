<mat-toolbar class="main-toolbar">
  <div class="toolbar-content">
    <!-- Left Section -->
    <div class="toolbar-left">
      <button mat-icon-button class="menu-toggle-btn" (click)="collapsed.set(!collapsed())">
        <mat-icon>menu</mat-icon>
      </button>
      <a routerLink="/" class="toolbar-logo">
        <mat-icon class="logo-icon">local_hospital</mat-icon>
        <span class="logo-text">{{ 'dashboard.clinicName' | translate }}</span>
      </a>
    </div>

    <!-- Right Section -->
    <div class="toolbar-right">
      <app-language-switcher></app-language-switcher>
      
      @if(isLoggedIn()){
        <div *ngIf="authService.getUserDetail() as userDetail" class="user-section">
          <a
            [matMenuTriggerFor]="menu"
            class="user-menu-trigger"
          >
            <div class="user-avatar">
              {{ userDetail!.fullName[0].toUpperCase() }}
            </div>
            <div class="user-info">
              <span class="user-name">{{ userDetail!.fullName }}</span>
              <span class="user-role">{{ userDetail?.roles }}</span>
            </div>
            <mat-icon class="dropdown-icon">keyboard_arrow_down</mat-icon>
          </a>
          <mat-menu #menu="matMenu" class="user-menu">
            <button [routerLink]="['account', userDetail.id]" mat-menu-item class="menu-item-btn">
              <mat-icon>account_circle</mat-icon>
              <span>{{ 'account.viewProfile' | translate }}</span>
            </button>
            <mat-divider></mat-divider>
            <button (click)="logout()" mat-menu-item class="menu-item-btn logout-btn">
              <mat-icon>logout</mat-icon>
              <span>{{ 'auth.logout' | translate }}</span>
            </button>
          </mat-menu>
        </div>
      } @else {
        <div class="auth-buttons">
          <a mat-stroked-button routerLink="/login" class="login-btn">
            <mat-icon>login</mat-icon>
            {{ 'auth.login' | translate }}
          </a>
          <a mat-raised-button routerLink="/register" class="register-btn">
            <mat-icon>person_add</mat-icon>
            {{ 'auth.register' | translate }}
          </a>
        </div>
      }
    </div>
  </div>
</mat-toolbar>
<mat-sidenav-container>
  <mat-sidenav opened mode="side" [style.width]="sidenavWidth()">
    <app-sidenav [collapsed]="collapsed()"></app-sidenav>
  </mat-sidenav>
  <mat-sidenav-content class="content" [style.margin-left]="translationService.isRtl() ? '0' : sidenavWidth()" [style.margin-right]="translationService.isRtl() ? sidenavWidth() : '0'">
    <router-outlet />
  </mat-sidenav-content>
</mat-sidenav-container>
